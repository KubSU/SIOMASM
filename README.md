# SIOMASM

Простая библиотека ввода вывода. Адаптирована под Windows.

Так же в `io.asm` включен файл `masm32rt.inc` - *главный* включаемый файл, содержащий все основные заголовчные файлы и библиотеки.

Скачать [архив](https://github.com/KubSU/SIOMASM/archive/master.zip).

[Сообщить об ошибке или сделать пожелание](https://github.com/KubSU/SIOMASM/issues/new).

## Макросы

Макрос           | Описание
:----------------:|---------
`inint8 a`        | Параметр a - `r8` или `m8`.
`inint16 a`       | Параметр a - `r16` или `m16`.
`inint32 a`       | Параметр a - `r32` или `m32`.
`inch  c`         | Параметр c - `r8` или `m8`.
`outint8 a [,n]`  | Параметр a - `r8`, `m8` или `i8`. <br> Параметр n - (опциональный) количество позиций, отводимых для числа (если длина числа меньше, то дополняется пробелами).
`outint16 a [,n]` | Параметр a - `r16`, `sr16`, `m16` или `i16`. <br> Параметр n - (опциональный) количество позиций, отводимых для числа (если длина числа меньше, то дополняется пробелами).
`outint32 a [,n]` | Параметр a - `r32`, `sr32`, `m32` или `i32`. <br> Параметр n - (опциональный) количество позиций, отводимых для числа (если длина числа меньше, то дополняется пробелами).
`outch c`         | Параметр c - `r8`, `m8` или `i8`. <br> Например `outch 'A'`
`newline`         | Перевод строки.
`outstr o`        | Параметр o - offset строки. Строка обязательно должна оканчиваться 0 байтом. <br> Например `Text db "Text",0`.
`outstrln o`      | То же самое, только с переходом на следующую строку.

## Установка IDE RadASM

- Установить MASM из `Install/masm32v11r.zip`. Обязательно в корневой каталог диска `C:\`.
- Установить библиотеку ввода-вывода, запустив от администратора `Install\InstallLibs.bat`.
- Распаковать `Install/RadASM.zip` в любое удобное место на диске `C:\`.

## Hello World!

```nasm
.686								; Архитектура процессора i686
include /masm32/include/io.asm		; Включаем библиотеку ввода-вывода

.data								; Сегмент данных
	msgHello db "Hello World!", 0	; Объявляем сообщение

.code								; Сегмент кода
start:
	outstr offset msgHello			; Выводим сообщение
	inkey							; Ждем нажатия любой клавиши
	exit							; Завершаем работу программы
end start							; Объявлвем точку входа в программу
```

## Компиляция и линковка без RadASM

Если Вы работаете вне среды RadASM, и выводите строки, содержащие кириллицу, то удостоверьтесь, что Ваши исходники в кодировке `Windows-1251`.

Для удобства компиляции и линковки был взят скрипт `buld.bat`. Входной параметр - имя файла без расширения. 

Например, если исходник называется `example.asm`, то построение исполняемого файла происходит так:
```
build example
```
